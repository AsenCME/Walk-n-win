{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"../../firebase","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.fetchCodes = fetchCodes;\n  exports.FETCH_CODE_ERROR = exports.FETCH_CODE_SUCCESS = exports.FETCH_CODES_START = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/regenerator\"));\n\n  var _firebase = _$$_REQUIRE(_dependencyMap[2], \"../../firebase\");\n\n  var FETCH_CODES_START = 'FETCH_CODES_START';\n  exports.FETCH_CODES_START = FETCH_CODES_START;\n  var FETCH_CODE_SUCCESS = 'FETCH_CODE_SUCCESS';\n  exports.FETCH_CODE_SUCCESS = FETCH_CODE_SUCCESS;\n  var FETCH_CODE_ERROR = 'FETCH_CODE_ERROR';\n  exports.FETCH_CODE_ERROR = FETCH_CODE_ERROR;\n\n  function fetchCodes() {\n    return function _callee(dispatch) {\n      var result, companies, promiseArr, companyCodes;\n      return _regenerator.default.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch(startCodeFetching());\n              _context.prev = 1;\n              result = [];\n              _context.next = 5;\n              return _regenerator.default.awrap(_firebase.firestore.collection('companies').limit(5).get());\n\n            case 5:\n              companies = _context.sent;\n              promiseArr = [];\n              companies.forEach(function (company) {\n                var data = company.data();\n                result.push({\n                  storeName: data.name,\n                  logoImage: data.logoUrl,\n                  backgroundImage: data.backgroundUrl,\n                  codes: []\n                });\n                promiseArr.push(_firebase.firestore.collection('companies').doc(company.id).collection('codes').get());\n              });\n              _context.next = 10;\n              return _regenerator.default.awrap(Promise.all(promiseArr));\n\n            case 10:\n              companyCodes = _context.sent;\n              companyCodes.forEach(function (item, i) {\n                if (!item.empty) {\n                  item.docs.forEach(function (code) {\n                    code = code.data();\n                    var codeObj = {\n                      name: code.name,\n                      description: code.description,\n                      inStock: code.currentStock,\n                      discount: code.discount,\n                      price: code.price\n                    };\n                    result[i].codes.push(codeObj);\n                  });\n                }\n              });\n              dispatch(codeFetchingSuccess(result));\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](1);\n              dispatch(codeFetchingError(_context.t0.message));\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[1, 15]]);\n    };\n  }\n\n  function startCodeFetching() {\n    return {\n      type: FETCH_CODES_START\n    };\n  }\n\n  function codeFetchingSuccess(codes) {}\n\n  function codeFetchingError(error) {\n    return {\n      type: FETCH_CODE_ERROR,\n      error: error\n    };\n  }\n});","map":[[12,0,1,0],[14,0,3,7],[14,6,3,13,"FETCH_CODES_START"],[14,23,3,30],[14,26,3,33],[14,45,3,7],[16,0,4,7],[16,6,4,13,"FETCH_CODE_SUCCESS"],[16,24,4,31],[16,27,4,34],[16,47,4,7],[18,0,5,7],[18,6,5,13,"FETCH_CODE_ERROR"],[18,22,5,29],[18,25,5,32],[18,43,5,7],[21,0,7,7],[21,11,7,16,"fetchCodes"],[21,21,7,7],[21,24,7,29],[22,0,8,4],[22,11,8,11],[22,28,8,17,"dispatch"],[22,36,8,11],[23,0,8,11],[24,0,8,11],[25,0,8,11],[26,0,8,11],[27,0,8,11],[28,0,9,8,"dispatch"],[28,14,9,8,"dispatch"],[28,22,9,16],[28,23,9,17,"startCodeFetching"],[28,40,9,34],[28,42,9,16],[28,43,9,8],[29,0,8,11],[30,0,12,18,"result"],[30,14,12,18,"result"],[30,20,8,11],[30,23,12,27],[30,25,8,11],[31,0,8,11],[32,0,8,11],[32,48,13,36,"firestore"],[32,68,13,46,"collection"],[32,78,13,36],[32,79,13,57],[32,90,13,36],[32,92,13,70,"limit"],[32,97,13,36],[32,98,13,76],[32,99,13,36],[32,101,13,79,"get"],[32,104,13,36],[32,106,8,11],[34,0,8,11],[35,0,13,18,"companies"],[35,14,13,18,"companies"],[35,23,8,11],[36,0,14,18,"promiseArr"],[36,14,14,18,"promiseArr"],[36,24,8,11],[36,27,14,31],[36,29,8,11],[37,0,16,12,"companies"],[37,14,16,12,"companies"],[37,23,16,21],[37,24,16,22,"forEach"],[37,31,16,12],[37,32,16,30],[37,42,16,30,"company"],[37,49,16,37],[37,51,16,41],[38,0,17,16],[38,20,17,22,"data"],[38,24,17,26],[38,27,17,29,"company"],[38,34,17,36],[38,35,17,37,"data"],[38,39,17,29],[38,41,17,16],[39,0,19,16,"result"],[39,16,19,16,"result"],[39,22,19,22],[39,23,19,23,"push"],[39,27,19,16],[39,28,19,28],[40,0,20,20,"storeName"],[40,18,20,20,"storeName"],[40,27,20,29],[40,29,20,31,"data"],[40,33,20,35],[40,34,20,36,"name"],[40,38,19,28],[41,0,21,20,"logoImage"],[41,18,21,20,"logoImage"],[41,27,21,29],[41,29,21,31,"data"],[41,33,21,35],[41,34,21,36,"logoUrl"],[41,41,19,28],[42,0,22,20,"backgroundImage"],[42,18,22,20,"backgroundImage"],[42,33,22,35],[42,35,22,37,"data"],[42,39,22,41],[42,40,22,42,"backgroundUrl"],[42,53,19,28],[43,0,23,20,"codes"],[43,18,23,20,"codes"],[43,23,23,25],[43,25,23,27],[44,0,19,28],[44,17,19,16],[45,0,26,16,"promiseArr"],[45,16,26,16,"promiseArr"],[45,26,26,26],[45,27,26,27,"push"],[45,31,26,16],[45,32,27,20,"firestore"],[45,52,27,30,"collection"],[45,62,27,20],[45,63,27,41],[45,74,27,20],[45,76,27,54,"doc"],[45,79,27,20],[45,80,27,58,"company"],[45,87,27,65],[45,88,27,66,"id"],[45,90,27,20],[45,92,27,70,"collection"],[45,102,27,20],[45,103,27,81],[45,110,27,20],[45,112,27,90,"get"],[45,115,27,20],[45,117,26,16],[46,0,29,13],[46,15,16,12],[47,0,8,11],[48,0,8,11],[48,48,31,39,"Promise"],[48,55,31,46],[48,56,31,47,"all"],[48,59,31,39],[48,60,31,51,"promiseArr"],[48,70,31,39],[48,71,8,11],[50,0,8,11],[51,0,31,18,"companyCodes"],[51,14,31,18,"companyCodes"],[51,26,8,11],[52,0,33,12,"companyCodes"],[52,14,33,12,"companyCodes"],[52,26,33,24],[52,27,33,25,"forEach"],[52,34,33,12],[52,35,33,33],[52,45,33,34,"item"],[52,49,33,33],[52,51,33,40,"i"],[52,52,33,33],[52,54,33,46],[53,0,35,16],[53,20,35,19],[53,21,35,20,"item"],[53,25,35,24],[53,26,35,25,"empty"],[53,31,35,16],[53,33,35,32],[54,0,36,20,"item"],[54,18,36,20,"item"],[54,22,36,24],[54,23,36,25,"docs"],[54,27,36,20],[54,28,36,30,"forEach"],[54,35,36,20],[54,36,36,38],[54,46,36,38,"code"],[54,50,36,42],[54,52,36,46],[55,0,37,24,"code"],[55,20,37,24,"code"],[55,24,37,28],[55,27,37,31,"code"],[55,31,37,35],[55,32,37,36,"data"],[55,36,37,31],[55,38,37,24],[56,0,38,23],[56,24,38,29,"codeObj"],[56,31,38,36],[56,34,38,39],[57,0,39,27,"name"],[57,22,39,27,"name"],[57,26,39,31],[57,28,39,33,"code"],[57,32,39,37],[57,33,39,38,"name"],[57,37,38,39],[58,0,40,27,"description"],[58,22,40,27,"description"],[58,33,40,38],[58,35,40,40,"code"],[58,39,40,44],[58,40,40,45,"description"],[58,51,38,39],[59,0,41,27,"inStock"],[59,22,41,27,"inStock"],[59,29,41,34],[59,31,41,36,"code"],[59,35,41,40],[59,36,41,41,"currentStock"],[59,48,38,39],[60,0,42,27,"discount"],[60,22,42,27,"discount"],[60,30,42,35],[60,32,42,37,"code"],[60,36,42,41],[60,37,42,42,"discount"],[60,45,38,39],[61,0,43,27,"price"],[61,22,43,27,"price"],[61,27,43,32],[61,29,43,34,"code"],[61,33,43,38],[61,34,43,39,"price"],[62,0,38,39],[62,21,38,23],[63,0,46,23,"result"],[63,20,46,23,"result"],[63,26,46,29],[63,27,46,30,"i"],[63,28,46,29],[63,29,46,23],[63,30,46,33,"codes"],[63,35,46,23],[63,36,46,39,"push"],[63,40,46,23],[63,41,46,44,"codeObj"],[63,48,46,23],[64,0,47,21],[64,19,36,20],[65,0,48,17],[66,0,50,13],[66,15,33,12],[67,0,52,12,"dispatch"],[67,14,52,12,"dispatch"],[67,22,52,20],[67,23,52,21,"codeFetchingSuccess"],[67,42,52,40],[67,43,52,41,"result"],[67,49,52,40],[67,50,52,20],[67,51,52,12],[68,0,8,11],[69,0,8,11],[71,0,8,11],[72,0,8,11],[73,0,8,11],[74,0,55,12,"dispatch"],[74,14,55,12,"dispatch"],[74,22,55,20],[74,23,55,21,"codeFetchingError"],[74,40,55,38],[74,41,55,39],[74,53,55,45,"message"],[74,60,55,38],[74,61,55,20],[74,62,55,12],[76,0,8,11],[77,0,8,11],[78,0,8,11],[79,0,8,11],[80,0,8,11],[81,0,8,11],[82,0,8,11],[82,5,8,4],[83,0,59,1],[85,0,61,0],[85,11,61,9,"startCodeFetching"],[85,28,61,0],[85,31,61,29],[86,0,62,4],[86,11,62,11],[87,0,63,8,"type"],[87,6,63,8,"type"],[87,10,63,12],[87,12,63,14,"FETCH_CODES_START"],[88,0,62,11],[88,5,62,4],[89,0,65,1],[91,0,67,0],[91,11,67,9,"codeFetchingSuccess"],[91,30,67,0],[91,31,67,29,"codes"],[91,36,67,0],[91,38,67,36],[91,39,69,1],[93,0,71,0],[93,11,71,9,"codeFetchingError"],[93,28,71,0],[93,29,71,27,"error"],[93,34,71,0],[93,36,71,34],[94,0,72,4],[94,11,72,11],[95,0,73,8,"type"],[95,6,73,8,"type"],[95,10,73,12],[95,12,73,14,"FETCH_CODE_ERROR"],[95,28,72,11],[96,0,74,8,"error"],[96,6,74,8,"error"],[96,11,74,13],[96,13,74,8,"error"],[97,0,72,11],[97,5,72,4],[98,0,76,1]]},"type":"js/module"}]}
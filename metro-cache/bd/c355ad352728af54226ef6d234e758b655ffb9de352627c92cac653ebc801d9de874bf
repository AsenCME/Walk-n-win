{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"../../constants/defaultUser","data":{"isAsync":false}},{"name":"../../firebase","data":{"isAsync":false}},{"name":"../../store/createStore","data":{"isAsync":false}},{"name":"./DateUtil","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/regenerator\"));\n\n  var _extends2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/extends\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/createClass\"));\n\n  var _defaultUser = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"../../constants/defaultUser\"));\n\n  var _firebase = _$$_REQUIRE(_dependencyMap[6], \"../../firebase\");\n\n  var _createStore = _$$_REQUIRE(_dependencyMap[7], \"../../store/createStore\");\n\n  var _DateUtil = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"./DateUtil\"));\n\n  var User = function () {\n    function User() {\n      (0, _classCallCheck2.default)(this, User);\n    }\n\n    (0, _createClass2.default)(User, null, [{\n      key: \"createUser\",\n      value: function createUser(username) {\n        var newUser = (0, _extends2.default)({}, _defaultUser.default);\n        newUser.createdAt = _DateUtil.default.unixTimeStamp();\n        if (username) newUser.username = username;\n        return newUser;\n      }\n    }, {\n      key: \"deleteCurrentUser\",\n      value: function deleteCurrentUser() {\n        var uid;\n        return _regenerator.default.async(function deleteCurrentUser$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!_firebase.auth.currentUser || !_firebase.auth.currentUser.uid)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                uid = _firebase.auth.currentUser.uid;\n                _context.next = 5;\n                return _regenerator.default.awrap(_firebase.auth.currentUser.delete());\n\n              case 5:\n                _context.next = 7;\n                return _regenerator.default.awrap(_firebase.firestore.collection('users').doc(uid).delete());\n\n              case 7:\n                return _context.abrupt(\"return\", true);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    }, {\n      key: \"getUID\",\n      value: function getUID() {\n        if (_firebase.auth.currentUser && _firebase.auth.currentUser.uid) return _firebase.auth.currentUser.uid;else return null;\n      }\n    }, {\n      key: \"sync\",\n      value: function sync() {\n        var state;\n        return _regenerator.default.async(function sync$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                state = _createStore.store.getState();\n                _context2.prev = 1;\n                _context2.next = 4;\n                return _regenerator.default.awrap(_firebase.firestore.collection('users').doc(User.getUID()).update({\n                  credits: state.user.credits,\n                  totalPoints: state.user.totalPoints,\n                  today: {\n                    steps: state.activities.steps,\n                    calories: state.activities.calories,\n                    distance: state.activities.distance\n                  },\n                  lastSync: state.user.lastSync\n                }));\n\n              case 4:\n                _context2.next = 9;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log('Firebase Syncing Failed');\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, [[1, 6]]);\n      }\n    }]);\n    return User;\n  }();\n\n  var _default = User;\n  exports.default = _default;\n});","map":[[17,0,1,0],[19,0,2,0],[21,0,3,0],[23,0,4,0],[25,6,6,6,"User"],[25,10],[32,33,7,22,"username"],[32,41],[32,43,7,32],[33,0,8,8],[33,12,8,14,"newUser"],[33,19,8,21],[33,22,8,24],[33,45,8,38],[33,47,8,24],[33,49,8,42,"defaultUser"],[33,69,8,24],[33,70,8,8],[34,0,9,8,"newUser"],[34,8,9,8,"newUser"],[34,15,9,15],[34,16,9,16,"createdAt"],[34,25,9,8],[34,28,9,28,"DateUtil"],[34,46,9,37,"unixTimeStamp"],[34,59,9,28],[34,61,9,8],[35,0,10,8],[35,12,10,11,"username"],[35,20,10,8],[35,22,11,12,"newUser"],[35,29,11,19],[35,30,11,20,"username"],[35,38,11,12],[35,41,11,31,"username"],[35,49,11,12],[36,0,13,8],[36,15,13,15,"newUser"],[36,22,13,8],[37,0,14,5],[46,22,17,11],[46,23,17,12,"auth"],[46,38,17,17,"currentUser"],[46,49,17,11],[46,53,17,32],[46,54,17,33,"auth"],[46,69,17,38,"currentUser"],[46,80,17,33],[46,81,17,50,"uid"],[46,84],[54,0,19,14,"uid"],[54,16,19,14,"uid"],[54,19],[54,22,19,20,"auth"],[54,37,19,25,"currentUser"],[54,48,19,20],[54,49,19,37,"uid"],[54,52],[56,50,20,14,"auth"],[56,65,20,19,"currentUser"],[56,76,20,14],[56,77,20,31,"delete"],[56,83,20,14],[56,85],[60,50,21,14,"firestore"],[60,70,21,24,"collection"],[60,80,21,14],[60,81,21,35],[60,88,21,14],[60,90,21,44,"doc"],[60,93,21,14],[60,94,21,48,"uid"],[60,97,21,14],[60,99,21,53,"delete"],[60,105,21,14],[60,107],[63,49,22,15],[63,53],[74,31,25,20],[75,0,26,8],[75,12,26,11,"auth"],[75,27,26,16,"currentUser"],[75,38,26,11],[75,42,26,31,"auth"],[75,57,26,36,"currentUser"],[75,68,26,31],[75,69,26,48,"uid"],[75,72,26,8],[75,74,27,12],[75,81,27,19,"auth"],[75,96,27,24,"currentUser"],[75,107,27,19],[75,108,27,36,"uid"],[75,111,27,12],[75,112,26,8],[75,117,28,13],[75,124,28,20],[75,128,28,13],[76,0,29,5],[85,0,32,14,"state"],[85,16,32,14,"state"],[85,21],[85,24,32,22,"store"],[85,43,32,28,"getState"],[85,51,32,22],[85,53],[88,50,34,18,"firestore"],[88,70,34,28,"collection"],[88,80,34,18],[88,81,34,39],[88,88,34,18],[88,90,34,48,"doc"],[88,93,34,18],[88,94,34,52,"User"],[88,98,34,56],[88,99,34,57,"getUID"],[88,105,34,52],[88,107,34,18],[88,109,34,67,"update"],[88,115,34,18],[88,116,34,74],[89,0,35,16,"credits"],[89,18,35,16,"credits"],[89,25,35,23],[89,27,35,25,"state"],[89,32,35,30],[89,33,35,31,"user"],[89,37,35,25],[89,38,35,36,"credits"],[89,45,34,74],[90,0,36,16,"totalPoints"],[90,18,36,16,"totalPoints"],[90,29,36,27],[90,31,36,29,"state"],[90,36,36,34],[90,37,36,35,"user"],[90,41,36,29],[90,42,36,40,"totalPoints"],[90,53,34,74],[91,0,37,16,"today"],[91,18,37,16,"today"],[91,23,37,21],[91,25,37,23],[92,0,38,20,"steps"],[92,20,38,20,"steps"],[92,25,38,25],[92,27,38,27,"state"],[92,32,38,32],[92,33,38,33,"activities"],[92,43,38,27],[92,44,38,44,"steps"],[92,49,37,23],[93,0,39,20,"calories"],[93,20,39,20,"calories"],[93,28,39,28],[93,30,39,30,"state"],[93,35,39,35],[93,36,39,36,"activities"],[93,46,39,30],[93,47,39,47,"calories"],[93,55,37,23],[94,0,40,20,"distance"],[94,20,40,20,"distance"],[94,28,40,28],[94,30,40,30,"state"],[94,35,40,35],[94,36,40,36,"activities"],[94,46,40,30],[94,47,40,47,"distance"],[95,0,37,23],[95,19,34,74],[96,0,42,16,"lastSync"],[96,18,42,16,"lastSync"],[96,26,42,24],[96,28,42,26,"state"],[96,33,42,31],[96,34,42,32,"user"],[96,38,42,26],[96,39,42,37,"lastSync"],[97,0,34,74],[97,17,34,18],[97,18],[106,0,45,12,"console"],[106,16,45,12,"console"],[106,23,45,19],[106,24,45,20,"log"],[106,27,45,12],[106,28,45,24],[106,53,45,12],[119,17,50,15,"User"],[119,21]]},"type":"js/module"}]}